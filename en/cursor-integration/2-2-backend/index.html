<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-cursor-integration/2-2-backend" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">⚙️ Backend | FIS AI Cookbook</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://hiro-pna.github.io/ai-cookbook/en/img/ai-cookbook-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://hiro-pna.github.io/ai-cookbook/en/img/ai-cookbook-social-card.jpg"><meta data-rh="true" property="og:url" content="https://hiro-pna.github.io/ai-cookbook/en/cursor-integration/2-2-backend"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="vi"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="⚙️ Backend | FIS AI Cookbook"><meta data-rh="true" name="description" content="Sau khi sử dụng các mẫu prompt này, backend developer sẽ có khả năng:"><meta data-rh="true" property="og:description" content="Sau khi sử dụng các mẫu prompt này, backend developer sẽ có khả năng:"><link data-rh="true" rel="icon" href="/ai-cookbook/en/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://hiro-pna.github.io/ai-cookbook/en/cursor-integration/2-2-backend"><link data-rh="true" rel="alternate" href="https://hiro-pna.github.io/ai-cookbook/cursor-integration/2-2-backend" hreflang="vi"><link data-rh="true" rel="alternate" href="https://hiro-pna.github.io/ai-cookbook/en/cursor-integration/2-2-backend" hreflang="en"><link data-rh="true" rel="alternate" href="https://hiro-pna.github.io/ai-cookbook/cursor-integration/2-2-backend" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"⚙️ Backend","item":"https://hiro-pna.github.io/ai-cookbook/en/cursor-integration/2-2-backend"}]}</script><link rel="stylesheet" href="/ai-cookbook/en/assets/css/styles.144b0e65.css">
<script src="/ai-cookbook/en/assets/js/runtime~main.5521a6fa.js" defer="defer"></script>
<script src="/ai-cookbook/en/assets/js/main.2e58cd10.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/ai-cookbook/en/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/ai-cookbook/en/"><div class="navbar__logo"><img src="/ai-cookbook/en/img/logo.svg" alt="AI Cookbook Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/ai-cookbook/en/img/logo.svg" alt="AI Cookbook Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">AI Cookbook</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/ai-cookbook/en/intro">Hướng Dẫn</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/ai-cookbook/cursor-integration/2-2-backend" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="vi">Tiếng Việt</a></li><li><a href="/ai-cookbook/en/cursor-integration/2-2-backend" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li></ul></div><a href="https://github.com/hiro-pna/ai-cookbook" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ai-cookbook/en/intro">AI Cookbook for Developers, BA &amp; Testers</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/ai-cookbook/en/cursor-integration/">Developer: Tích hợp và sử dụng Cursor</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ai-cookbook/en/cursor-integration/">Tổng quan</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ai-cookbook/en/cursor-integration/cau-hinh-cursor">Cấu hình &amp; Sử dụng Cursor</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ai-cookbook/en/cursor-integration/cursor-rules">Cursor Rules</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/ai-cookbook/en/cursor-integration/2-1-frontend">Prompt mẫu theo Tech Stack</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ai-cookbook/en/cursor-integration/2-1-frontend">🎨 Frontend</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/ai-cookbook/en/cursor-integration/2-2-backend">⚙️ Backend</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ai-cookbook/en/cursor-integration/2-3-devops">🚀 DevOpp</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ai-cookbook/en/cursor-integration/meo-pair-programming">Quy trình Pair-programming hiệu quả với AI</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/ai-cookbook/en/gpt-for-technical-docs/">BA/Tester: Tận dụng GPT để tạo tài liệu</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/ai-cookbook/en/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Developer: Tích hợp và sử dụng Cursor</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Prompt mẫu theo Tech Stack</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">⚙️ Backend</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>⚙️ Backend</h1></header>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>🎯 Mục tiêu</div><div class="admonitionContent_BuS1"><p>Sau khi sử dụng các mẫu prompt này, backend developer sẽ có khả năng:</p><ul>
<li>⚡ <strong>Tăng tốc phát triển</strong> với các prompt được tối ưu hóa</li>
<li>🎯 <strong>Tạo mã nguồn chất lượng cao</strong> tuân thủ best practices</li>
<li>🔧 <strong>Gỡ lỗi hiệu quả</strong> với sự hỗ trợ của AI</li>
<li>🏗️ <strong>Xây dựng API services</strong> nhanh chóng và nhất quán</li>
</ul></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-các-kịch-bản-phát-triển-workflow">🚀 Các Kịch Bản Phát Triển Workflow<a href="#-các-kịch-bản-phát-triển-workflow" class="hash-link" aria-label="Direct link to 🚀 Các Kịch Bản Phát Triển Workflow" title="Direct link to 🚀 Các Kịch Bản Phát Triển Workflow">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1️⃣-tạo-crud-operations-từ-database-schema">1️⃣ <strong>Tạo CRUD Operations từ Database Schema</strong><a href="#1️⃣-tạo-crud-operations-từ-database-schema" class="hash-link" aria-label="Direct link to 1️⃣-tạo-crud-operations-từ-database-schema" title="Direct link to 1️⃣-tạo-crud-operations-từ-database-schema">​</a></h3>
<p><strong>🎯 Tình huống:</strong> Khởi tạo nhanh một feature slice hoàn chỉnh từ database design.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-mẫu-spring-boot-full-stack">☕ <strong>Mẫu: Spring Boot Full Stack</strong><a href="#-mẫu-spring-boot-full-stack" class="hash-link" aria-label="Direct link to -mẫu-spring-boot-full-stack" title="Direct link to -mẫu-spring-boot-full-stack">​</a></h4>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Tạo một complete feature slice cho Product Management trong Spring Boot.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Context:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Framework: Spring Boot 3.2 + Java 17</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Database: PostgreSQL với JPA/Hibernate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Architecture: Layered architecture (Controller → Service → Repository)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Security: JWT authentication với Spring Security</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Documentation: OpenAPI 3.0 với Springdoc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Database Schema:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE products (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id BIGSERIAL PRIMARY KEY,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name VARCHAR(255) NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    description TEXT,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    price DECIMAL(10,2) NOT NULL CHECK (price &gt; 0),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stock_quantity INTEGER NOT NULL DEFAULT 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    category_id BIGINT NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sku VARCHAR(100) UNIQUE NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    is_active BOOLEAN DEFAULT true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    created_by VARCHAR(100),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    updated_by VARCHAR(100),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FOREIGN KEY (category_id) REFERENCES categories(id)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Requirements:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**1. JPA Entity:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Audit fields với `@CreationTimestamp`, `@UpdateTimestamp`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Validation annotations (`@NotNull`, `@Positive`, `@Size`)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Relationship mapping với Category entity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Custom equals/hashCode based on business key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**2. Repository Layer:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Extend `JpaRepository&lt;Product, Long&gt;`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Custom query methods với `@Query`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Specification-based dynamic queries</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Pagination và sorting support</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**3. Service Layer:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Interface và implementation separation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- DTO mapping với MapStruct</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Business validation rules</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Transaction management với `@Transactional`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**4. Controller Layer:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- RESTful endpoints (`/api/v1/products`)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Request/Response DTOs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Validation với `@Valid`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- OpenAPI documentation annotations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**5. Exception Handling:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Custom exceptions (`ProductNotFoundException`)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Global exception handler với `@ControllerAdvice`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Structured error responses</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Expected File Structure:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">src/main/java/com/company/product/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── entity/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── Product.java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── repository/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── ProductRepository.java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── service/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── ProductService.java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── ProductServiceImpl.java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── controller/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── ProductController.java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── dto/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── ProductRequestDto.java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── ProductResponseDto.java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── ProductUpdateDto.java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── mapper/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── ProductMapper.java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── exception/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    └── ProductNotFoundException.java</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-mẫu-net-core-clean-architecture">🔷 <strong>Mẫu: .NET Core Clean Architecture</strong><a href="#-mẫu-net-core-clean-architecture" class="hash-link" aria-label="Direct link to -mẫu-net-core-clean-architecture" title="Direct link to -mẫu-net-core-clean-architecture">​</a></h4>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Implement Product Management feature trong .NET 8 với Clean Architecture.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Architecture Layers:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Domain:** Entities, Value Objects, Domain Services</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Application:** Use Cases, DTOs, Interfaces</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Infrastructure:** Data Access, External Services</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Presentation:** API Controllers, Middleware</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Domain Requirements:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Domain Entity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Product : BaseEntity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public string Name { get; private set; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public string Description { get; private set; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Money Price { get; private set; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public int StockQuantity { get; private set; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ProductSku Sku { get; private set; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public CategoryId CategoryId { get; private set; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public bool IsActive { get; private set; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Domain methods</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void UpdatePrice(Money newPrice);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void AdjustStock(int quantity);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void Activate();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void Deactivate();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Application Layer:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **CQRS pattern** với MediatR</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Command/Query separation**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Validation** với FluentValidation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Mapping** với AutoMapper</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Use Cases to Implement:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1. `CreateProductCommand` - Tạo sản phẩm mới</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. `UpdateProductCommand` - Cập nhật thông tin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. `GetProductQuery` - Lấy thông tin sản phẩm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4. `GetProductsQuery` - Lấy danh sách với filtering</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5. `DeleteProductCommand` - Xóa sản phẩm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Infrastructure:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **EF Core** với Code First approach</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Repository pattern** implementation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Unit of Work** pattern</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Database migrations**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**API Layer:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Minimal APIs** hoặc Controller-based</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Swagger/OpenAPI** documentation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Versioning** support</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Rate limiting** và **CORS** configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Error Handling:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Custom exceptions với specific error codes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Global exception middleware</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Structured logging với Serilog</span><br></span></code></pre></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2️⃣-thiết-kế-api--documentation">2️⃣ <strong>Thiết Kế API &amp; Documentation</strong><a href="#2️⃣-thiết-kế-api--documentation" class="hash-link" aria-label="Direct link to 2️⃣-thiết-kế-api--documentation" title="Direct link to 2️⃣-thiết-kế-api--documentation">​</a></h3>
<p><strong>🎯 Tình huống:</strong> Thiết kế RESTful APIs chuẩn mực với comprehensive documentation.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-mẫu-openapi-specification">📡 <strong>Mẫu: OpenAPI Specification</strong><a href="#-mẫu-openapi-specification" class="hash-link" aria-label="Direct link to -mẫu-openapi-specification" title="Direct link to -mẫu-openapi-specification">​</a></h4>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Design comprehensive OpenAPI 3.0 specification cho E-commerce Product API.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**API Requirements:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Base Configuration:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Base URL: `https://api.example.com/v1`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Authentication: Bearer JWT tokens</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Content-Type: `application/json`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Error format: RFC 7807 Problem Details</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Endpoints to Design:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**1. Product Management:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GET    /products              # List products with filtering</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">POST   /products              # Create new product</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GET    /products/{id}         # Get product by ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PUT    /products/{id}         # Update product</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DELETE /products/{id}         # Delete product</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PATCH  /products/{id}/stock   # Update stock quantity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**2. Advanced Features:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GET    /products/search       # Full-text search</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GET    /products/categories/{categoryId}  # Products by category</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">POST   /products/bulk         # Bulk operations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GET    /products/export       # Export to CSV/Excel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Schema Definitions:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ProductResponse:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type: object</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  properties:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      type: integer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      format: int64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      example: 123</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      type: string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      maxLength: 255</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      example: &quot;Wireless Headphones&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    description:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      type: string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      example: &quot;High-quality noise-cancelling headphones&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    price:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      type: number</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      format: decimal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      minimum: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      example: 299.99</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stockQuantity:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      type: integer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      minimum: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      example: 50</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sku:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      type: string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      pattern: &quot;^[A-Z0-9-]+$&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      example: &quot;WH-001&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    category:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      $ref: &#x27;#/components/schemas/CategoryResponse&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    isActive:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      type: boolean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      example: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    createdAt:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      type: string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      format: date-time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    updatedAt:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      type: string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      format: date-time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Error Handling:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 400: Bad Request với validation details</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 401: Unauthorized</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 403: Forbidden</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 404: Not Found</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 409: Conflict (duplicate SKU)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 422: Unprocessable Entity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 500: Internal Server Error</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Query Parameters:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Pagination: `page`, `size`, `sort`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Filtering: `category`, `priceMin`, `priceMax`, `inStock`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Search: `q` (full-text search)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Response Headers:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- `X-Total-Count`: Total number of items</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- `X-Page-Count`: Total number of pages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- `Link`: Pagination links (RFC 5988)</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-mẫu-authentication--authorization">🔒 <strong>Mẫu: Authentication &amp; Authorization</strong><a href="#-mẫu-authentication--authorization" class="hash-link" aria-label="Direct link to -mẫu-authentication--authorization" title="Direct link to -mẫu-authentication--authorization">​</a></h4>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Implement JWT-based authentication system với role-based authorization.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Authentication Flow:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1. **Login:** Username/password → JWT access + refresh tokens</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. **Token Refresh:** Refresh token → new access token</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. **Logout:** Invalidate refresh token</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4. **Password Reset:** Email-based reset flow</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Security Requirements:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**JWT Configuration:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Access Token:** 15 minutes expiry, contains user claims</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Refresh Token:** 7 days expiry, stored securely</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Algorithm:** RS256 với key rotation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Claims:** userId, roles, permissions, iat, exp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Authorization Levels:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public enum Role {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ADMIN(&quot;admin&quot;, Set.of(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Permission.PRODUCT_CREATE,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Permission.PRODUCT_UPDATE,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Permission.PRODUCT_DELETE,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Permission.USER_MANAGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MANAGER(&quot;manager&quot;, Set.of(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Permission.PRODUCT_CREATE,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Permission.PRODUCT_UPDATE,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Permission.PRODUCT_VIEW</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    USER(&quot;user&quot;, Set.of(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Permission.PRODUCT_VIEW</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Security Implementation:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Password hashing:** BCrypt với salt rounds 12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Rate limiting:** 5 login attempts per 15 minutes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Account lockout:** After 5 failed attempts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Session management:** Redis-based token blacklist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **CSRF protection:** For web clients</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **CORS configuration:** Restricted origins</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**API Endpoints:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">POST /auth/login           # Authenticate user</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">POST /auth/refresh         # Refresh access token</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">POST /auth/logout          # Logout user</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">POST /auth/forgot-password # Request password reset</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">POST /auth/reset-password  # Reset password with token</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GET  /auth/profile         # Get current user profile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PUT  /auth/profile         # Update user profile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Security Headers:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- `Authorization: Bearer {access_token}`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- `X-CSRF-Token: {csrf_token}` (for web clients)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Security response headers (HSTS, CSP, etc.)</span><br></span></code></pre></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3️⃣-thiết-kế-database--tối-ưu-hóa">3️⃣ <strong>Thiết Kế Database &amp; Tối Ưu Hóa</strong><a href="#3️⃣-thiết-kế-database--tối-ưu-hóa" class="hash-link" aria-label="Direct link to 3️⃣-thiết-kế-database--tối-ưu-hóa" title="Direct link to 3️⃣-thiết-kế-database--tối-ưu-hóa">​</a></h3>
<p><strong>🎯 Tình huống:</strong> Thiết kế database schema và optimize performance.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="️-mẫu-thiết-kế-database-phức-tạp">🗄️ <strong>Mẫu: Thiết Kế Database Phức Tạp</strong><a href="#️-mẫu-thiết-kế-database-phức-tạp" class="hash-link" aria-label="Direct link to ️-mẫu-thiết-kế-database-phức-tạp" title="Direct link to ️-mẫu-thiết-kế-database-phức-tạp">​</a></h4>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Design database schema cho Multi-tenant E-commerce Platform.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Business Requirements:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Multi-tenancy:** Multiple stores on same platform</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Product Catalog:** Complex product variations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Order Management:** Complete order lifecycle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Inventory Tracking:** Real-time stock management</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **User Management:** Customers, store owners, admins</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Core Entities:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**1. Tenant Management:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE tenants (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name VARCHAR(255) NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    subdomain VARCHAR(100) UNIQUE NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    domain VARCHAR(255),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    plan_type VARCHAR(50) NOT NULL DEFAULT &#x27;basic&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    status VARCHAR(20) NOT NULL DEFAULT &#x27;active&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    settings JSONB,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE INDEX idx_tenants_subdomain ON tenants(subdomain);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE INDEX idx_tenants_domain ON tenants(domain);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**2. Product Catalog với Variations:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE products (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tenant_id UUID NOT NULL REFERENCES tenants(id),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name VARCHAR(255) NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    description TEXT,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    base_price DECIMAL(10,2) NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sku VARCHAR(100) NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    category_id UUID REFERENCES categories(id),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    brand_id UUID REFERENCES brands(id),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    status VARCHAR(20) DEFAULT &#x27;active&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attributes JSONB, -- Flexible attributes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    seo_data JSONB,   -- SEO metadata</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    UNIQUE(tenant_id, sku)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE product_variants (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    product_id UUID NOT NULL REFERENCES products(id) ON DELETE CASCADE,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name VARCHAR(255) NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sku VARCHAR(100) NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    price_adjustment DECIMAL(10,2) DEFAULT 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stock_quantity INTEGER NOT NULL DEFAULT 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    variant_attributes JSONB, -- Size, Color, etc.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    is_default BOOLEAN DEFAULT false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    UNIQUE(product_id, sku)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**3. Order Management:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE orders (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tenant_id UUID NOT NULL REFERENCES tenants(id),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    customer_id UUID REFERENCES customers(id),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    order_number VARCHAR(50) UNIQUE NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    status VARCHAR(20) NOT NULL DEFAULT &#x27;pending&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    subtotal DECIMAL(10,2) NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tax_amount DECIMAL(10,2) NOT NULL DEFAULT 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    shipping_amount DECIMAL(10,2) NOT NULL DEFAULT 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    total_amount DECIMAL(10,2) NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    currency VARCHAR(3) NOT NULL DEFAULT &#x27;USD&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    shipping_address JSONB,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    billing_address JSONB,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    payment_status VARCHAR(20) DEFAULT &#x27;pending&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fulfillment_status VARCHAR(20) DEFAULT &#x27;unfulfilled&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    notes TEXT,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE order_items (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    order_id UUID NOT NULL REFERENCES orders(id) ON DELETE CASCADE,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    product_variant_id UUID NOT NULL REFERENCES product_variants(id),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    quantity INTEGER NOT NULL CHECK (quantity &gt; 0),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    unit_price DECIMAL(10,2) NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    total_price DECIMAL(10,2) NOT NULL,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    product_snapshot JSONB -- Store product data at time of order</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Performance Optimizations:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Partitioning:** Orders by tenant_id và date</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Indexing Strategy:** Composite indexes for common queries</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Materialized Views:** For reporting và analytics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Connection Pooling:** PgBouncer configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Query Optimization:** EXPLAIN ANALYZE for slow queries</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Data Integrity:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Foreign Key Constraints:** Maintain referential integrity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Check Constraints:** Business rule validation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Triggers:** Audit trails và automatic updates</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Row Level Security:** Tenant isolation</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-mẫu-tối-ưu-hóa-query">🔍 <strong>Mẫu: Tối Ưu Hóa Query</strong><a href="#-mẫu-tối-ưu-hóa-query" class="hash-link" aria-label="Direct link to -mẫu-tối-ưu-hóa-query" title="Direct link to -mẫu-tối-ưu-hóa-query">​</a></h4>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Optimize slow-performing queries trong e-commerce database.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Scenario:** Product search và filtering queries đang chậm.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Current Slow Query:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SELECT p.*, c.name as category_name, b.name as brand_name,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       AVG(r.rating) as avg_rating, COUNT(r.id) as review_count</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM products p</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LEFT JOIN categories c ON p.category_id = c.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LEFT JOIN brands b ON p.brand_id = b.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LEFT JOIN reviews r ON p.id = r.product_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WHERE p.tenant_id = $1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  AND p.status = &#x27;active&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  AND p.name ILIKE &#x27;%wireless%&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  AND p.base_price BETWEEN $2 AND $3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  AND c.name = $4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GROUP BY p.id, c.name, b.name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ORDER BY avg_rating DESC, p.created_at DESC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LIMIT 20 OFFSET $5;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Performance Analysis:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1. **EXPLAIN ANALYZE** the query</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. **Identify bottlenecks:** Sequential scans, expensive sorts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. **Check index usage:** Missing or inefficient indexes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4. **Analyze query plan:** Nested loops vs hash joins</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Optimization Strategy:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**1. Index Optimization:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- Composite index for common filters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE INDEX idx_products_tenant_status_price </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ON products(tenant_id, status, base_price) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WHERE status = &#x27;active&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- Full-text search index</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE INDEX idx_products_name_gin </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ON products USING gin(to_tsvector(&#x27;english&#x27;, name));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- Category filtering</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE INDEX idx_products_category_tenant </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ON products(category_id, tenant_id, status);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**2. Query Rewrite:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- Split into multiple queries to avoid expensive JOINs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WITH product_base AS (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  SELECT id, name, base_price, category_id, brand_id, created_at</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  FROM products </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  WHERE tenant_id = $1 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AND status = &#x27;active&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AND base_price BETWEEN $2 AND $3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AND to_tsvector(&#x27;english&#x27;, name) @@ to_tsquery(&#x27;wireless&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">product_ratings AS (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  SELECT product_id, AVG(rating) as avg_rating, COUNT(*) as review_count</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  FROM reviews </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  WHERE product_id IN (SELECT id FROM product_base)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  GROUP BY product_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SELECT pb.*, c.name as category_name, b.name as brand_name,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       COALESCE(pr.avg_rating, 0) as avg_rating,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       COALESCE(pr.review_count, 0) as review_count</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM product_base pb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LEFT JOIN categories c ON pb.category_id = c.id AND c.name = $4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LEFT JOIN brands b ON pb.brand_id = b.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LEFT JOIN product_ratings pr ON pb.id = pr.product_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WHERE c.id IS NOT NULL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ORDER BY pr.avg_rating DESC NULLS LAST, pb.created_at DESC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LIMIT 20 OFFSET $5;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**3. Materialized Views:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```sql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- Pre-computed product ratings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE MATERIALIZED VIEW product_ratings_mv AS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SELECT product_id, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       AVG(rating) as avg_rating,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       COUNT(*) as review_count,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       MAX(created_at) as last_review_at</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM reviews </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GROUP BY product_id;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE UNIQUE INDEX ON product_ratings_mv(product_id);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-- Refresh strategy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE OR REPLACE FUNCTION refresh_product_ratings()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RETURNS void AS $$</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BEGIN</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  REFRESH MATERIALIZED VIEW CONCURRENTLY product_ratings_mv;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">END;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$$ LANGUAGE plpgsql;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**4. Application-Level Optimizations:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Query result caching** với Redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Database connection pooling**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Read replicas** cho search queries</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Elasticsearch** cho complex search requirements</span><br></span></code></pre></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4️⃣-chiến-lược-testing">4️⃣ <strong>Chiến Lược Testing</strong><a href="#4️⃣-chiến-lược-testing" class="hash-link" aria-label="Direct link to 4️⃣-chiến-lược-testing" title="Direct link to 4️⃣-chiến-lược-testing">​</a></h3>
<p><strong>🎯 Tình huống:</strong> Comprehensive testing cho backend services.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-mẫu-unit-testing">🧪 <strong>Mẫu: Unit Testing</strong><a href="#-mẫu-unit-testing" class="hash-link" aria-label="Direct link to -mẫu-unit-testing" title="Direct link to -mẫu-unit-testing">​</a></h4>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Viết comprehensive unit tests cho ProductService trong Spring Boot.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Testing Framework:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- JUnit 5 + Mockito + AssertJ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Testcontainers cho integration tests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- WireMock cho external service mocking</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Test Structure:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**1. Service Layer Tests:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ExtendWith(MockitoExtension.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class ProductServiceTest {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Mock private ProductRepository productRepository;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Mock private CategoryRepository categoryRepository;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Mock private ProductMapper productMapper;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Mock private ProductValidator productValidator;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @InjectMocks private ProductServiceImpl productService;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @DisplayName(&quot;Should create product successfully when valid data provided&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void shouldCreateProductSuccessfully() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Given</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ProductCreateRequest request = ProductTestData.createValidRequest();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Product product = ProductTestData.createProduct();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ProductResponse expectedResponse = ProductTestData.createResponse();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        when(productValidator.validate(request)).thenReturn(ValidationResult.valid());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        when(categoryRepository.existsById(request.getCategoryId())).thenReturn(true);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        when(productMapper.toEntity(request)).thenReturn(product);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        when(productRepository.save(product)).thenReturn(product);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        when(productMapper.toResponse(product)).thenReturn(expectedResponse);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // When</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ProductResponse actualResponse = productService.createProduct(request);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        assertThat(actualResponse).isEqualTo(expectedResponse);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        verify(productRepository).save(product);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        verifyNoMoreInteractions(productRepository);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @DisplayName(&quot;Should throw exception when category not found&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void shouldThrowExceptionWhenCategoryNotFound() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Given</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ProductCreateRequest request = ProductTestData.createValidRequest();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        when(categoryRepository.existsById(request.getCategoryId())).thenReturn(false);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // When &amp; Then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        assertThatThrownBy(() -&gt; productService.createProduct(request))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .isInstanceOf(CategoryNotFoundException.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .hasMessage(&quot;Category not found with id: &quot; + request.getCategoryId());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        verify(productRepository, never()).save(any());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**2. Repository Tests:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@DataJpaTest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@TestPropertySource(properties = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;spring.jpa.hibernate.ddl-auto=create-drop&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;spring.datasource.url=jdbc:h2:mem:testdb&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class ProductRepositoryTest {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired private TestEntityManager entityManager;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired private ProductRepository productRepository;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @DisplayName(&quot;Should find products by category and price range&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void shouldFindProductsByCategoryAndPriceRange() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Given</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Category category = CategoryTestData.createCategory();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        entityManager.persistAndFlush(category);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Product product1 = ProductTestData.createProduct(category, new BigDecimal(&quot;100.00&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Product product2 = ProductTestData.createProduct(category, new BigDecimal(&quot;200.00&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Product product3 = ProductTestData.createProduct(category, new BigDecimal(&quot;300.00&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        entityManager.persistAndFlush(product1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        entityManager.persistAndFlush(product2);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        entityManager.persistAndFlush(product3);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // When</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        List&lt;Product&gt; results = productRepository.findByCategoryAndPriceRange(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            category.getId(), </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            new BigDecimal(&quot;150.00&quot;), </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            new BigDecimal(&quot;250.00&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        assertThat(results).hasSize(1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        assertThat(results.get(0).getBasePrice()).isEqualTo(new BigDecimal(&quot;200.00&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**3. Test Data Builders:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ProductTestData {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static ProductCreateRequest createValidRequest() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return ProductCreateRequest.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .name(&quot;Test Product&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .description(&quot;Test Description&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .basePrice(new BigDecimal(&quot;99.99&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .sku(&quot;TEST-001&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .categoryId(1L)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .stockQuantity(100)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static Product createProduct() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return Product.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .id(1L)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .name(&quot;Test Product&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .description(&quot;Test Description&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .basePrice(new BigDecimal(&quot;99.99&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .sku(&quot;TEST-001&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .stockQuantity(100)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .isActive(true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .createdAt(Instant.now())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-mẫu-integration-testing">🔗 <strong>Mẫu: Integration Testing</strong><a href="#-mẫu-integration-testing" class="hash-link" aria-label="Direct link to -mẫu-integration-testing" title="Direct link to -mẫu-integration-testing">​</a></h4>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Viết integration tests cho Product API endpoints.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Test Setup:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Testcontainers:** PostgreSQL container cho database</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **MockWebServer:** Mock external services</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **TestRestTemplate:** API endpoint testing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Integration Test Structure:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**1. API Integration Tests:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Testcontainers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class ProductControllerIntegrationTest {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    static PostgreSQLContainer&lt;?&gt; postgres = new PostgreSQLContainer&lt;&gt;(&quot;postgres:15&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .withDatabaseName(&quot;testdb&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .withUsername(&quot;test&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .withPassword(&quot;test&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired private TestRestTemplate restTemplate;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired private ProductRepository productRepository;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired private CategoryRepository categoryRepository;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @DynamicPropertySource</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    static void configureProperties(DynamicPropertyRegistry registry) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        registry.add(&quot;spring.datasource.url&quot;, postgres::getJdbcUrl);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        registry.add(&quot;spring.datasource.username&quot;, postgres::getUsername);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        registry.add(&quot;spring.datasource.password&quot;, postgres::getPassword);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Sql(&quot;/test-data/categories.sql&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @DisplayName(&quot;Should create product and return 201 status&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void shouldCreateProductSuccessfully() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Given</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ProductCreateRequest request = ProductTestData.createValidRequest();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        HttpHeaders headers = new HttpHeaders();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        headers.setBearerAuth(getValidJwtToken());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        HttpEntity&lt;ProductCreateRequest&gt; entity = new HttpEntity&lt;&gt;(request, headers);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // When</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ResponseEntity&lt;ProductResponse&gt; response = restTemplate.postForEntity(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;/api/v1/products&quot;, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            entity, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ProductResponse.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        assertThat(response.getStatusCode()).isEqualTo(HttpStatus.CREATED);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        assertThat(response.getBody()).isNotNull();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        assertThat(response.getBody().getName()).isEqualTo(request.getName());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Verify database state</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Optional&lt;Product&gt; savedProduct = productRepository.findBySku(request.getSku());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        assertThat(savedProduct).isPresent();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @DisplayName(&quot;Should return 400 when validation fails&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void shouldReturnBadRequestForInvalidData() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Given</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ProductCreateRequest invalidRequest = ProductCreateRequest.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .name(&quot;&quot;) // Invalid: empty name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .basePrice(new BigDecimal(&quot;-10.00&quot;)) // Invalid: negative price</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        HttpHeaders headers = new HttpHeaders();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        headers.setBearerAuth(getValidJwtToken());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        HttpEntity&lt;ProductCreateRequest&gt; entity = new HttpEntity&lt;&gt;(invalidRequest, headers);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // When</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ResponseEntity&lt;ErrorResponse&gt; response = restTemplate.postForEntity(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;/api/v1/products&quot;, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            entity, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ErrorResponse.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        assertThat(response.getStatusCode()).isEqualTo(HttpStatus.BAD_REQUEST);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        assertThat(response.getBody().getErrors()).hasSize(2);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**2. Database Integration Tests:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@DataJpaTest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Testcontainers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class ProductRepositoryIntegrationTest {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    static PostgreSQLContainer&lt;?&gt; postgres = new PostgreSQLContainer&lt;&gt;(&quot;postgres:15&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Transactional</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @DisplayName(&quot;Should handle concurrent product updates correctly&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void shouldHandleConcurrentUpdates() throws InterruptedException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Given</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Product product = ProductTestData.createProduct();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        entityManager.persistAndFlush(product);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CountDownLatch latch = new CountDownLatch(2);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        AtomicInteger successCount = new AtomicInteger(0);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        AtomicInteger failureCount = new AtomicInteger(0);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // When - Simulate concurrent updates</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ExecutorService executor = Executors.newFixedThreadPool(2);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        executor.submit(() -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                productRepository.updateStock(product.getId(), 10);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                successCount.incrementAndGet();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } catch (Exception e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                failureCount.incrementAndGet();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } finally {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                latch.countDown();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        executor.submit(() -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                productRepository.updateStock(product.getId(), -5);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                successCount.incrementAndGet();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } catch (Exception e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                failureCount.incrementAndGet();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } finally {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                latch.countDown();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        latch.await(5, TimeUnit.SECONDS);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        assertThat(successCount.get()).isEqualTo(2);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        assertThat(failureCount.get()).isEqualTo(0);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Product updatedProduct = productRepository.findById(product.getId()).orElseThrow();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        assertThat(updatedProduct.getStockQuantity()).isEqualTo(105); // 100 + 10 - 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="5️⃣-hiệu-suất--giám-sát">5️⃣ <strong>Hiệu Suất &amp; Giám Sát</strong><a href="#5️⃣-hiệu-suất--giám-sát" class="hash-link" aria-label="Direct link to 5️⃣-hiệu-suất--giám-sát" title="Direct link to 5️⃣-hiệu-suất--giám-sát">​</a></h3>
<p><strong>🎯 Tình huống:</strong> Optimize performance và implement monitoring.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-mẫu-tối-ưu-hóa-hiệu-suất">⚡ <strong>Mẫu: Tối Ưu Hóa Hiệu Suất</strong><a href="#-mẫu-tối-ưu-hóa-hiệu-suất" class="hash-link" aria-label="Direct link to -mẫu-tối-ưu-hóa-hiệu-suất" title="Direct link to -mẫu-tối-ưu-hóa-hiệu-suất">​</a></h4>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Optimize Spring Boot application performance cho high-traffic e-commerce system.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Performance Goals:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Response Time:** P95 &lt; 200ms cho API calls</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Throughput:** 1000+ requests/second</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Memory Usage:** &lt; 2GB heap size</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Database:** &lt; 50ms query response time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Optimization Areas:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**1. JVM Tuning:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Production JVM settings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-Xms2g -Xmx2g</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-XX:+UseG1GC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-XX:MaxGCPauseMillis=200</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-XX:+UseStringDeduplication</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-XX:+OptimizeStringConcat</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-Dspring.profiles.active=prod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**2. Database Optimization:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class DatabaseConfig {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Primary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public DataSource primaryDataSource() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        HikariConfig config = new HikariConfig();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        config.setJdbcUrl(env.getProperty(&quot;spring.datasource.url&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        config.setUsername(env.getProperty(&quot;spring.datasource.username&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        config.setPassword(env.getProperty(&quot;spring.datasource.password&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Connection pool optimization</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        config.setMaximumPoolSize(20);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        config.setMinimumIdle(5);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        config.setConnectionTimeout(30000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        config.setIdleTimeout(600000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        config.setMaxLifetime(1800000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        config.setLeakDetectionThreshold(60000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new HikariDataSource(config);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Qualifier(&quot;readOnly&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public DataSource readOnlyDataSource() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Configure read replica connection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return createReadOnlyDataSource();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**3. Caching Strategy:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@CacheConfig(cacheNames = &quot;products&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ProductService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Cacheable(key = &quot;#id&quot;, unless = &quot;#result == null&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ProductResponse getProduct(Long id) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return productRepository.findById(id)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .map(productMapper::toResponse)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .orElseThrow(() -&gt; new ProductNotFoundException(id));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @CacheEvict(key = &quot;#result.id&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ProductResponse updateProduct(Long id, ProductUpdateRequest request) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Update logic</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Cacheable(key = &quot;&#x27;search:&#x27; + #searchCriteria.hashCode()&quot;, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               condition = &quot;#searchCriteria.cacheable&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Page&lt;ProductResponse&gt; searchProducts(ProductSearchCriteria searchCriteria) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Search implementation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@EnableCaching</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class CacheConfig {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public CacheManager cacheManager() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RedisCacheManager.Builder builder = RedisCacheManager</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .RedisCacheManagerBuilder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .fromConnectionFactory(redisConnectionFactory())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .cacheDefaults(cacheConfiguration());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return builder.build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private RedisCacheConfiguration cacheConfiguration() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return RedisCacheConfiguration.defaultCacheConfig()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .entryTtl(Duration.ofMinutes(10))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .serializeKeysWith(RedisSerializationContext.SerializationPair</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .fromSerializer(new StringRedisSerializer()))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .serializeValuesWith(RedisSerializationContext.SerializationPair</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .fromSerializer(new GenericJackson2JsonRedisSerializer()));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**4. Async Processing:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class OrderService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Async(&quot;taskExecutor&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public CompletableFuture&lt;Void&gt; processOrderAsync(Order order) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Heavy processing logic</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        inventoryService.reserveItems(order.getItems());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        paymentService.processPayment(order.getPayment());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        emailService.sendConfirmation(order.getCustomer());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return CompletableFuture.completedFuture(null);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@EnableAsync</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class AsyncConfig {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean(name = &quot;taskExecutor&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public TaskExecutor taskExecutor() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        executor.setCorePoolSize(10);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        executor.setMaxPoolSize(50);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        executor.setQueueCapacity(100);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        executor.setThreadNamePrefix(&quot;async-task-&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        executor.setRejectedExecutionHandler(new ThreadPoolExecutor.CallerRunsPolicy());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        executor.initialize();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return executor;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-mẫu-giám-sát--observability">📊 <strong>Mẫu: Giám Sát &amp; Observability</strong><a href="#-mẫu-giám-sát--observability" class="hash-link" aria-label="Direct link to -mẫu-giám-sát--observability" title="Direct link to -mẫu-giám-sát--observability">​</a></h4>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Implement comprehensive monitoring cho Spring Boot application.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Monitoring Stack:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Metrics:** Micrometer + Prometheus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Logging:** Logback + ELK Stack</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Tracing:** Spring Cloud Sleuth + Zipkin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Health Checks:** Spring Boot Actuator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- **Alerting:** Grafana + AlertManager</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Implementation:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**1. Metrics Configuration:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MetricsConfig {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public TimedAspect timedAspect(MeterRegistry registry) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new TimedAspect(registry);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public CounterService counterService(MeterRegistry registry) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new CounterService(registry);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RestController</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Timed(name = &quot;product.api&quot;, description = &quot;Product API operations&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ProductController {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final Counter productCreatedCounter;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final Timer productSearchTimer;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ProductController(MeterRegistry registry) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.productCreatedCounter = Counter.builder(&quot;product.created&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .description(&quot;Number of products created&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .tag(&quot;api&quot;, &quot;product&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .register(registry);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.productSearchTimer = Timer.builder(&quot;product.search.duration&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .description(&quot;Product search duration&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .register(registry);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @PostMapping</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ResponseEntity&lt;ProductResponse&gt; createProduct(@RequestBody ProductCreateRequest request) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ProductResponse response = productService.createProduct(request);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        productCreatedCounter.increment();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return ResponseEntity.status(HttpStatus.CREATED).body(response);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @GetMapping(&quot;/search&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ResponseEntity&lt;Page&lt;ProductResponse&gt;&gt; searchProducts(ProductSearchCriteria criteria) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return Timer.Sample.start(registry)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .stop(productSearchTimer)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .recordCallable(() -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Page&lt;ProductResponse&gt; results = productService.searchProducts(criteria);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                return ResponseEntity.ok(results);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**2. Logging Có Cấu Trúc:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class AuditLogger {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final Logger logger = LoggerFactory.getLogger(AuditLogger.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final ObjectMapper objectMapper;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void logProductCreated(ProductResponse product, String userId) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        AuditEvent event = AuditEvent.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .eventType(&quot;PRODUCT_CREATED&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .userId(userId)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .resourceId(product.getId().toString())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .resourceType(&quot;PRODUCT&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .timestamp(Instant.now())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .details(Map.of(&quot;productName&quot;, product.getName(), &quot;sku&quot;, product.getSku()))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logger.info(&quot;audit_event={}&quot;, toJson(event));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void logApiCall(String endpoint, String method, int statusCode, long duration) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ApiCallEvent event = ApiCallEvent.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .endpoint(endpoint)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .method(method)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .statusCode(statusCode)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .duration(duration)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .timestamp(Instant.now())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logger.info(&quot;api_call={}&quot;, toJson(event));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**3. Kiểm Tra Sức Khỏe:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class CustomHealthIndicator implements HealthIndicator {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final ProductRepository productRepository;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final RedisTemplate&lt;String, String&gt; redisTemplate;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Health health() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Check database connectivity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            long productCount = productRepository.count();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Check Redis connectivity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            redisTemplate.opsForValue().set(&quot;health:check&quot;, &quot;ok&quot;, Duration.ofSeconds(30));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Check external service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            boolean externalServiceUp = checkExternalService();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (externalServiceUp) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                return Health.up()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .withDetail(&quot;database&quot;, &quot;UP&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .withDetail(&quot;redis&quot;, &quot;UP&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .withDetail(&quot;external-service&quot;, &quot;UP&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .withDetail(&quot;product-count&quot;, productCount)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                return Health.down()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .withDetail(&quot;external-service&quot;, &quot;DOWN&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } catch (Exception e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return Health.down()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .withDetail(&quot;error&quot;, e.getMessage())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**4. Theo Dõi Phân Tán:**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># application.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  sleuth:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    zipkin:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      base-url: http://zipkin:9411</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sampler:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      probability: 0.1  # Sample 10% of requests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  application:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name: product-service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">management:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  endpoints:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    web:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      exposure:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        include: health,info,metrics,prometheus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  endpoint:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    health:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      show-details: always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  metrics:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    export:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      prometheus:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        enabled: true</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-best-practices--tips">🎯 Best Practices &amp; Tips<a href="#-best-practices--tips" class="hash-link" aria-label="Direct link to 🎯 Best Practices &amp; Tips" title="Direct link to 🎯 Best Practices &amp; Tips">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-tip-prompt-engineering">💡 <strong>Tip Prompt Engineering</strong><a href="#-tip-prompt-engineering" class="hash-link" aria-label="Direct link to -tip-prompt-engineering" title="Direct link to -tip-prompt-engineering">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-prompting-hiệu-quả-cho-backend">✅ <strong>Prompting Hiệu Quả cho Backend:</strong><a href="#-prompting-hiệu-quả-cho-backend" class="hash-link" aria-label="Direct link to -prompting-hiệu-quả-cho-backend" title="Direct link to -prompting-hiệu-quả-cho-backend">​</a></h4>
<div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-markdown codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">✅ &quot;Implement ProductService trong Spring Boot với JPA, validation, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   exception handling, và unit tests. Include DTO mapping với MapStruct.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">❌ &quot;Tạo service cho product&quot;</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="️-context-is-king">🏗️ <strong>Context IS KING:</strong><a href="#️-context-is-king" class="hash-link" aria-label="Direct link to ️-context-is-king" title="Direct link to ️-context-is-king">​</a></h4>
<div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-markdown codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token bold punctuation" style="color:#393A34">**</span><span class="token bold content">Luôn chỉ định:</span><span class="token bold punctuation" style="color:#393A34">**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> Framework version (Spring Boot 3.2, .NET 8)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> Database type (PostgreSQL, MySQL, MongoDB)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> Architecture pattern (Layered, Clean, Hexagonal)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> Testing framework (JUnit 5, xUnit, Mocha)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> Additional tools (Docker, Redis, Elasticsearch)</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-phát-triển-lặp-lại">🔄 <strong>Phát Triển Lặp Lại:</strong><a href="#-phát-triển-lặp-lại" class="hash-link" aria-label="Direct link to -phát-triển-lặp-lại" title="Direct link to -phát-triển-lặp-lại">​</a></h4>
<div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-markdown codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token list punctuation" style="color:#393A34">1.</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#393A34">**</span><span class="token bold content">Bắt đầu với cấu trúc:</span><span class="token bold punctuation" style="color:#393A34">**</span><span class="token plain"> &quot;Tạo basic CRUD operations&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">2.</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#393A34">**</span><span class="token bold content">Thêm business logic:</span><span class="token bold punctuation" style="color:#393A34">**</span><span class="token plain"> &quot;Implement validation rules&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">3.</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#393A34">**</span><span class="token bold content">Thêm bảo mật:</span><span class="token bold punctuation" style="color:#393A34">**</span><span class="token plain"> &quot;Add JWT authentication&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">4.</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#393A34">**</span><span class="token bold content">Thêm giám sát:</span><span class="token bold punctuation" style="color:#393A34">**</span><span class="token plain"> &quot;Add metrics và logging&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">5.</span><span class="token plain"> </span><span class="token bold punctuation" style="color:#393A34">**</span><span class="token bold content">Tối ưu hóa:</span><span class="token bold punctuation" style="color:#393A34">**</span><span class="token plain"> &quot;Add caching và performance tuning&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-kỹ-thuật-nâng-cao">🚀 <strong>Kỹ Thuật Nâng Cao</strong><a href="#-kỹ-thuật-nâng-cao" class="hash-link" aria-label="Direct link to -kỹ-thuật-nâng-cao" title="Direct link to -kỹ-thuật-nâng-cao">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-tham-khảo-mã-hiện-có">📚 <strong>Tham Khảo Mã Hiện Có:</strong><a href="#-tham-khảo-mã-hiện-có" class="hash-link" aria-label="Direct link to -tham-khảo-mã-hiện-có" title="Direct link to -tham-khảo-mã-hiện-có">​</a></h4>
<div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-markdown codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Implement OrderService tương tự như ProductService trong @/services/ProductService.java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> nhưng với additional business rules cho order processing&quot;</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-chuỗi-workflows-phức-tạp">🔗 <strong>Chuỗi Workflows Phức Tạp:</strong><a href="#-chuỗi-workflows-phức-tạp" class="hash-link" aria-label="Direct link to -chuỗi-workflows-phức-tạp" title="Direct link to -chuỗi-workflows-phức-tạp">​</a></h4>
<div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-markdown codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Prompt 1: &quot;Design database schema&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Prompt 2: &quot;Generate JPA entities&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Prompt 3: &quot;Create repository layer&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Prompt 4: &quot;Implement service layer&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Prompt 5: &quot;Add REST controllers&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Prompt 6: &quot;Write comprehensive tests&quot;</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>💡 Pro Tips</div><div class="admonitionContent_BuS1"><ul>
<li><strong>Cụ thể về ràng buộc:</strong> Kích thước database, yêu cầu hiệu suất, nhu cầu bảo mật</li>
<li><strong>Bao gồm kịch bản lỗi:</strong> Cách xử lý failures, timeouts, data inconsistencies</li>
<li><strong>Chỉ định yêu cầu testing:</strong> Unit tests, integration tests, performance tests</li>
<li><strong>Xem xét scalability:</strong> Horizontal scaling, caching strategies, async processing</li>
</ul></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>⚠️ Lưu Ý Bảo Mật</div><div class="admonitionContent_BuS1"><ul>
<li><strong>Không bao giờ expose dữ liệu nhạy cảm:</strong> Database credentials, API keys, thông tin cá nhân</li>
<li><strong>Validate tất cả inputs:</strong> SQL injection, XSS, data validation</li>
<li><strong>Implement authentication đúng cách:</strong> JWT tokens, role-based access control</li>
<li><strong>Sử dụng parameterized queries:</strong> Ngăn chặn SQL injection attacks</li>
</ul></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/hiro-pna/ai-cookbook/tree/main/docs/1-cursor-integration/2-2-backend.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/ai-cookbook/en/cursor-integration/2-1-frontend"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">🎨 Frontend</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/ai-cookbook/en/cursor-integration/2-3-devops"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">🚀 DevOpp</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#-các-kịch-bản-phát-triển-workflow" class="table-of-contents__link toc-highlight">🚀 Các Kịch Bản Phát Triển Workflow</a><ul><li><a href="#1️⃣-tạo-crud-operations-từ-database-schema" class="table-of-contents__link toc-highlight">1️⃣ <strong>Tạo CRUD Operations từ Database Schema</strong></a></li><li><a href="#2️⃣-thiết-kế-api--documentation" class="table-of-contents__link toc-highlight">2️⃣ <strong>Thiết Kế API &amp; Documentation</strong></a></li><li><a href="#3️⃣-thiết-kế-database--tối-ưu-hóa" class="table-of-contents__link toc-highlight">3️⃣ <strong>Thiết Kế Database &amp; Tối Ưu Hóa</strong></a></li><li><a href="#4️⃣-chiến-lược-testing" class="table-of-contents__link toc-highlight">4️⃣ <strong>Chiến Lược Testing</strong></a></li><li><a href="#5️⃣-hiệu-suất--giám-sát" class="table-of-contents__link toc-highlight">5️⃣ <strong>Hiệu Suất &amp; Giám Sát</strong></a></li></ul></li><li><a href="#-best-practices--tips" class="table-of-contents__link toc-highlight">🎯 Best Practices &amp; Tips</a><ul><li><a href="#-tip-prompt-engineering" class="table-of-contents__link toc-highlight">💡 <strong>Tip Prompt Engineering</strong></a></li><li><a href="#-kỹ-thuật-nâng-cao" class="table-of-contents__link toc-highlight">🚀 <strong>Kỹ Thuật Nâng Cao</strong></a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Nội Dung</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/ai-cookbook/en/intro">Giới thiệu</a></li><li class="footer__item"><a class="footer__link-item" href="/ai-cookbook/en/cursor-integration">Tích hợp với Cursor</a></li><li class="footer__item"><a class="footer__link-item" href="/ai-cookbook/en/gpt-for-technical-docs">GPT cho Technical Docs</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Công Cụ AI</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://chat.openai.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">ChatGPT<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://gemini.google.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Google Gemini<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://cursor.sh" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cursor<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Tài Nguyên</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://docusaurus.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Docusaurus<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/hiro-pna/ai-cookbook" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Hiro. Built with Docusaurus. Powered by FPT IS.</div></div></div></footer></div>
</body>
</html>